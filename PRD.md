# 产品需求文档

为了帮助不擅长/不愿意整理电脑文件的人，设计一个智能的资源管理器/finder产品。MVP能打动人的点在于对现有、可能杂乱的文件进行智能化的呈现和利用，很快就能获得“让人眼前一亮的文件聚类效果”。

在这个Tauri App中，是三种语言混合使用：TypeScript负责前端界面呈现和相关逻辑，Rust直接跟操作系统打交道，做文件查找和扫描，而Python负责处理数据和跟数据库打交道，也负责跟LLM交流。

我们要求用户在macOS和Windows上给读取文件/文件夹的授权，然后监控文件变化，以便生成对用户有意义的“洞察”，如：

```
"最近项目动态：[项目A] 上周有 5 个文档更新" (点击可查看文件)
"本周截图盘点：新增 15 张来自 CleanShot 的截图" (点击可管理)
"文件待办提醒：发现 3 份文件名含‘草稿’的文件超过一个月未修改"
"清理建议：检测到 4 组文件可能为重复或旧版本" (点击可对比清理)
"常用应用文件：本月收到 20 个来自‘微信下载’的文件"
```

# 技术流程设计

当前完整流程设计：
按照Windows和macOS不同罗列常用文件夹，一个个的请求用户给授权 -> 
Rust 监听这些文件和文件夹，直至拿到元数据变更事件 -> 
Rust 读取文件元数据(路径、大小、时间戳、计算基本哈希)，注意并不读取文件内容 -> 
Rust 进行初步规则匹配(如扩展名分类、简单文件名模式等)，这个过程我称之为“粗筛” -> 
Rust 将更结构化的任务信息(包含元数据和初步分类结果)通过Python API入库 -> 
Rust 调用Python API通知它可以进行下一步工作，即将后续任务加入队列 -> 
Python worker 处理更复杂的逻辑(项目识别、高级规则、数据库操作、LLM交互，这个过程我称之为“精炼”) -> 
Python worker 在此基础上通过综合分析和挖掘数据生成具有“洞察”特性的结论 -> 
通过WebSocket通知前端呈现洞察卡片。

这个设计的好处有：
Rust将可能频繁变更的文件元数据通过初步规则处理后，流转给Python的任务量大大减少，减少了Python的计算压力。
Python可以专注于更复杂的逻辑，并通过跟LLM的交互尽量“发现”对用户有价值的“洞察”结论。
评估这些洞察对用户的吸引力有多大，并不是每次有“洞察”就通知用户，而是精选和控制频率和节奏，做到不打扰用户且让用户感觉眼前一亮。
所以从数据自下而上的数据量来说，文件元数据变更最多，Python处理的任务信息相对较少，洞察生成的结果最少，体现价值但不打扰用户。
