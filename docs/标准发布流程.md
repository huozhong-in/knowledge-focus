# æ ‡å‡†å‘å¸ƒæµç¨‹

## æ¨èçš„æ ‡å‡†å‘å¸ƒæµç¨‹

æ—¢ç„¶ä½ å·²ç»æœ‰äº†æ­£ç¡®çš„workflowæ–‡ä»¶ï¼Œæˆ‘æ¥ç»™ä½ ä¸€ä¸ªå®Œæ•´çš„å‘å¸ƒæµç¨‹ï¼š

### æ–¹æ¡ˆ1ï¼šä½¿ç”¨releaseåˆ†æ”¯

```bash
# 1. åˆ‡æ¢åˆ°releaseåˆ†æ”¯
git checkout release

# 2. ä»mainåˆ†æ”¯æ‹‰å–æœ€æ–°ä»£ç 
git merge main

# 3. æ›´æ–°ç‰ˆæœ¬å·
# ç¼–è¾‘ tauri-app/src-tauri/tauri.conf.jsonï¼Œä¿®æ”¹ç‰ˆæœ¬å·ï¼Œå¦‚ "0.3.4"

# 4. å¯é€‰ï¼šæ›´æ–°releaseBodyæè¿°
# ç¼–è¾‘ .github/workflows/build-macos-release.yaml ä¸­çš„ releaseBody

# 5. æäº¤å¹¶æ¨é€
git add .
git commit -m "release: bump version to 0.3.4"
git push origin release

# 6. ç­‰å¾…GitHub Actionså®Œæˆæ„å»º

# 7. åœ¨GitHubä¸Šå°†draft releaseæ”¹ä¸ºæ­£å¼å‘å¸ƒ

# 8. å°†å‘å¸ƒçš„æ”¹åŠ¨åˆå¹¶å›mainï¼ˆå¯é€‰ä½†æ¨èï¼‰
git checkout main
git merge release
git push origin main
```

### æ–¹æ¡ˆ2ï¼šä½¿ç”¨Git Tagè§¦å‘ï¼ˆæ›´æ ‡å‡†ï¼‰

å¦‚æœä½ æƒ³è¦æ›´æ ‡å‡†çš„åšæ³•ï¼Œä¿®æ”¹workflowä¹Ÿèƒ½åšåˆ°åŸºäºtagè§¦å‘ï¼š

```bash
# åŸºäºtagçš„å‘å¸ƒæµç¨‹ï¼ˆæ¨èï¼‰
# 1. åœ¨mainåˆ†æ”¯æ›´æ–°ç‰ˆæœ¬å’Œå‘å¸ƒè¯´æ˜
git checkout main

# 2. ç¼–è¾‘ç‰ˆæœ¬å·
# ç¼–è¾‘ tauri-app/src-tauri/tauri.conf.json ä¸­çš„ "version": "0.3.4"
# æ³¨æ„ï¼šä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ src/version.tsï¼ŒGitHub Actions ä¼šè‡ªåŠ¨åŒæ­¥

# 3. ç¼–è¾‘å‘å¸ƒè¯´æ˜ï¼ˆé‡è¦ï¼šè¿™ä¼šæˆä¸ºReleaseçš„å†…å®¹ï¼‰
# ç¼–è¾‘ .github/workflows/build-macos-release.yaml ä¸­çš„ releaseBody éƒ¨åˆ†
# æ›´æ–° "### ğŸ“‹ æ›´æ–°å†…å®¹" ä¸‹çš„å…·ä½“å˜æ›´è¯´æ˜

# 4. æäº¤æ‰€æœ‰ä¿®æ”¹
git add .
git commit -m "release: bump version to 0.3.4"

# 5. åˆ›å»ºtagï¼ˆtagåè¦ä¸ç‰ˆæœ¬å·å¯¹åº”ï¼‰
git tag v0.3.4

# 6. æ¨é€ä»£ç å’Œtag
git push origin main
git push origin v0.3.4

# 7. è‡ªåŠ¨è§¦å‘æ„å»ºå’Œå‘å¸ƒ
# GitHub Actionsä¼šè‡ªåŠ¨åˆ›å»ºdraft releaseå¹¶ä¸Šä¼ æ‰€æœ‰bundleæ–‡ä»¶

# 8. åœ¨GitHubä¸Šç¡®è®¤å¹¶å‘å¸ƒ
# æ£€æŸ¥draft releaseï¼Œç¡®è®¤æ— è¯¯åç‚¹å‡»"Publish release"
```

## å›ç­”ä½ çš„å…·ä½“é—®é¢˜

### 1. ç°åœ¨è¿™ä¸ªreleaseåˆ†æ”¯è¦åˆ é™¤å—ï¼Ÿ

**å»ºè®®ä¿ç•™**ï¼ŒåŸå› ï¼š

- å¯ä»¥ä½œä¸ºä¸“é—¨çš„å‘å¸ƒåˆ†æ”¯
- ä¿ç•™commitå†å²
- æ–¹ä¾¿å›æº¯å‘å¸ƒè¿‡ç¨‹

### 2. å…³äºåˆ†æ”¯ç®¡ç†

æ¨èä¸¤ç§æ–¹å¼ï¼š

#### æ–¹å¼Aï¼šé•¿æœŸreleaseåˆ†æ”¯

- ä¿ç•™releaseåˆ†æ”¯ï¼Œæ¯æ¬¡å‘å¸ƒæ—¶åˆå¹¶mainåˆ°release
- å¥½å¤„ï¼šç¨³å®šï¼Œå¯ä»¥åœ¨releaseåˆ†æ”¯åšå‘å¸ƒç›¸å…³çš„å¾®è°ƒ
- åå¤„ï¼šéœ€è¦ç»´æŠ¤ä¸¤ä¸ªåˆ†æ”¯

#### æ–¹å¼Bï¼šåŸºäºtagçš„å‘å¸ƒ

- åˆ é™¤releaseåˆ†æ”¯ï¼Œæ”¹ç”¨git tagè§¦å‘
- å¥½å¤„ï¼šæ›´æ ‡å‡†ï¼Œåªéœ€è¦ç»´æŠ¤mainåˆ†æ”¯
- åå¤„ï¼šçµæ´»åº¦è¾ƒä½
